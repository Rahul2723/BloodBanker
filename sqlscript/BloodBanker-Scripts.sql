create table users(userid VARCHAR(20), passwd VARCHAR(100), createts TIMESTAMP WITH LOCAL TIME ZONE, modifyts TIMESTAMP WITH LOCAL TIME ZONE, 
username VARCHAR(50));

ALTER TABLE USERS ADD (
  CONSTRAINT USERS_PK PRIMARY KEY (USERID));

INSERT INTO USERS VALUES('admin','admin',SYSDATE,SYSDATE,'admin');

SELECT USERNAME FROM USERS WHERE USERID='admin' AND PASSWD='admin';

INSERT INTO USERS VALUES('wajid','NoPassOK',SYSDATE,SYSDATE,'WAJID ALI');

SELECT USERNAME FROM USERS WHERE USERID='wajid' AND PASSWD='NoPassOK';

create table locations(LOC_ID VARCHAR(3), location_name varchar(100), createts TIMESTAMP WITH LOCAL TIME ZONE, modifyts TIMESTAMP WITH LOCAL TIME ZONE);

ALTER TABLE LOCATIONS ADD (
  CONSTRAINT LOCATIONS_PK PRIMARY KEY (LOC_ID));

INSERT INTO locations (LOC_ID, location_name) VALUES ('KOL', 'Kolkata');
INSERT INTO locations (LOC_ID, location_name) VALUES ('N24','North 24 Parganas');
INSERT INTO locations (LOC_ID, location_name) VALUES ('S24','South 24 Parganas');
INSERT INTO locations (LOC_ID, location_name) VALUES ('HWH','Howrah');

CREATE TABLE INSTITS(INSTIT_ID VARCHAR(5), LOC_ID VARCHAR(3), INST_NM VARCHAR(50), ADDRESS VARCHAR(100), CREATETS TIMESTAMP WITH LOCAL TIME ZONE, MODIFYTS TIMESTAMP WITH LOCAL TIME ZONE);

ALTER TABLE INSTITS ADD (
  CONSTRAINT INSTITS_PK PRIMARY KEY (INSTIT_ID, LOC_ID));

INSERT INTO INSTITS VALUES('APLMU','KOL', 'APOLLO MUNICH', 'SALT LAKE', SYSDATE, SYSDATE);
INSERT INTO INSTITS VALUES('APLMU','N24', 'APOLLO MUNICH', 'DUM DUM', SYSDATE, SYSDATE);
INSERT INTO INSTITS VALUES('APLMU','HWH', 'APOLLO MUNICH', 'SALKIA', SYSDATE, SYSDATE);
INSERT INTO INSTITS VALUES('APLMU','S24', 'APOLLO MUNICH', 'SOUTH 24 PGS', SYSDATE, SYSDATE);

CREATE TABLE SUPPLY (INSTIT_ID VARCHAR(5), LOC_ID VARCHAR(3), BLOOD_GRP VARCHAR(4), AVAILABLITY NUMBER(7,2), UOM VARCHAR(5), CREATETS TIMESTAMP WITH LOCAL TIME ZONE, MODIFYTS TIMESTAMP WITH LOCAL TIME ZONE);
ALTER TABLE SUPPLY ADD(SUPPLY_ID NUMBER NOT NULL);

ALTER TABLE SUPPLY ADD (
  CONSTRAINT SUPPLY_UNQ UNIQUE (INSTIT_ID, LOC_ID, BLOOD_GRP));

ALTER TABLE SUPPLY ADD (
  CONSTRAINT SUPPLY_PK PRIMARY KEY (SUPPLY_ID));

CREATE SEQUENCE SUPPLY_SEQ;

DESC SUPPLY;

SELECT * FROM SUPPLY;

INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'HWH', 'APos', 1575.32, 'L', SYSDATE, SYSDATE);
INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'KOL', 'OPos', 150.86, 'L', SYSDATE, SYSDATE);
INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'N24', 'APos', 1575.32, 'L', SYSDATE, SYSDATE);
INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'S24', 'APos', 1575.32, 'L', SYSDATE, SYSDATE);
INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'KOL', 'APos', 1575.32, 'L', SYSDATE, SYSDATE);
INSERT INTO SUPPLY (INSTIT_ID, LOC_ID, BLOOD_GRP, AVAILABLITY, UOM, CREATETS, MODIFYTS) VALUES('APLMU', 'HWH', 'BPos', 1575.32, 'L', SYSDATE, SYSDATE);

SELECT INST_NM,ADDRESS,BLOOD_GRP,AVAILABLITY,UOM FROM INSTITS JOIN SUPPLY ON SUPPLY.INSTIT_ID = INSTITS.INSTIT_ID AND SUPPLY.LOC_ID = INSTITS.LOC_ID WHERE INSTITS.LOC_ID='KOL' AND SUPPLY.BLOOD_GRP='APos';

SELECT INST_NM,ADDRESS,BLOOD_GRP,AVAILABLITY,UOM FROM INSTITS JOIN SUPPLY ON SUPPLY.INSTIT_ID = INSTITS.INSTIT_ID AND SUPPLY.LOC_ID = INSTITS.LOC_ID WHERE INSTITS.LOC_ID='KOL'